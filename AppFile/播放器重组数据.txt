var 上级地址=getVar("url");
if(上级地址.indexOf("api.php/app")!=-1){
    var 分类=getVar("源码").match(/\{"name".*?\}/g);
    var res={};var items=[];
    for(var i=0;i<分类.length;i++){
		var obj=JSON.parse(分类[i]);
        var 列表=obj.url.split("#"); 
        var 标题=obj.code; 
        var 接口=obj.parse_api; 
        var LIST=[];
        for (var j=0;j < 列表.length;j++){
            var 选集=列表[j].substring(0,列表[j].indexOf("$")); 
            if (列表[j].indexOf(".m3u8") != -1||列表[j].indexOf(".mp4") != -1||列表[j].indexOf("bilibili") != -1||列表[j].indexOf("huya") != -1){
                if(列表[j].indexOf(".mp4")!=-1){
                    var 选集地址="https://www.baidu.com/s?wd=" + decodeURIComponent(列表[j].substring(列表[j].indexOf("$")+1,列表[j].length));
                }else{
                    var 选集地址=列表[j].substring(列表[j].indexOf("$")+1,列表[j].length); 
                }
            }else{
                var 选集地址=接口+列表[j].substring(列表[j].indexOf("$")+1,列表[j].length);
            }
            LIST.push({title:选集, url:选集地址});
        }
        var play_ = {};
        play_.title = 标题;
        play_.list = LIST;
        items.push(play_);
    }
    res.data = items;
    JSON.stringify(res);
}else if(上级地址.indexOf("api.php/v1.vod")!=-1){
    var 分类=JSON.parse(getVar("源码").replace(/<.*?>/g,"").replace(/[\s]*/g,"")).data.vod_play_list;
    var res={};var items=[];
    for(var i=0;i<分类.length;i++){
        var 列表=分类[i].urls;
        var 标题=分类[i].player_info.from;
        if(分类[i].player_info.parse2.indexOf("=")!=-1){
            var 接口="http:"+分类[i].player_info.parse2.match(/\/\/[^,]*=/)[0].replace("..",".").replace("=&xktoken=","=").replace("http://vip.parwix.com:4433/player/?url=","http://jhsj.manduhu.com/?url=");
        }else if(分类[i].player_info.parse.indexOf("=")!=-1){
            var 接口="http:"+分类[i].player_info.parse.match(/\/\/[^,]*=/)[0].replace("..",".");
        }else{
            var 接口="";
        }
        var LIST=[];
        for (var j=0;j < 列表.length;j++){
            var 选集=列表[j].substring(0,列表[j].indexOf("$")); 
            if (列表[j].indexOf(".m3u8")!=-1||列表[j].indexOf(".mp4")!=-1||列表[j].indexOf("bilibili") != -1||列表[j].indexOf("huya") != -1){
                if(列表[j].indexOf(".mp4")!=-1){
                    var 选集地址="https://www.baidu.com/s?wd=" + decodeURIComponent(列表[j].substring(列表[j].indexOf("$")+1,列表[j].length));
                }else{
                    var 选集地址=列表[j].substring(列表[j].indexOf("$")+1,列表[j].length); 
                }
            }else{
                var 选集地址=接口+列表[j].substring(列表[j].indexOf("$")+1,列表[j].length); 
            }
            LIST.push({title:选集, url:选集地址});
        }
        var play_ = {};
        play_.title = 标题;
        play_.list = LIST;
        items.push(play_);
    }
    res.data = items;
    JSON.stringify(res);
}else{
    var CODE=getVar("源码");
    var 分类=e2Rex(CODE,".json(videolist)").match(/".*?\]/g);
    var res = {};var items = [];
    for(var i=0;i<分类.length;i++){
        var 列表=分类[i].match(/\{.*?\}/g);
        var 标题=e2Rex(分类[i],".ty(\").tz(\")");
        var LIST=[];
        for (var j=0;j<列表.length;j++){
            var 选集=e2Rex(列表[j],".json(title)");
            var 选集地址=e2Rex(列表[j],".json(url)");
            LIST.push({title:选集,url:选集地址});
        }
        var play_ = {};
        play_.title = 标题;
        play_.list = LIST;
        items.push(play_);
    }
    res.data = items;
    JSON.stringify(res);
}